 /*
Copyright 2019 @foostan
Copyright 2020 Drashna Jaelre <@drashna>

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 2 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.
*/

#include QMK_KEYBOARD_H
#include <stdio.h>
#include "features/casemodes.h"
#include "features/leader.h"
#include "features/achordion.h"
#include "features/layer_lock.h"
//#include  "../src/include/qmk-include.h"
#include "version.h"

int workmode = 0;
int keycount = 0;
int current_layer = 0;
int previous_layer = 0;

bool SHIFTED;
bool PARAGRAPH_MODE;
bool SPACE_NUMBER_PRESSED;
bool SPACE_NUMBER_ON;
bool SECOND_SPACE_NUMBERS_PRESSED;

static uint16_t p1_timer;
//static uint16_t space_timer;
static uint16_t space_timer_retro;

//static uint16_t p2_timer;
uint16_t shifted_keycode;

float my_song[][2] = SONG(QWERTY_SOUND);
float my_layerbeep[][2] = SONG(MYLOWBEEP);
float my_beep1[][2] = SONG(MYBEEP1);
float my_beep2[][2] = SONG(MYBEEP2);
float my_beep3[][2] = SONG(MYBEEP3);
float my_copy[][2] = SONG(COIN_SOUND);
float my_paste[][2] = SONG(MYPASTE);
float my_cut[][2] = SONG(MYCUT);
float my_gaming_song[][2] = SONG(ONE_UP_SOUND);
float my_colemak_song[][2] = SONG(COLEMAK_SOUND);
float my_layer_toggle_song[][2] = SONG(CLOSE_ENCOUNTERS_5);

//static uint16_t copypasta_timer;

enum tap_dance_codes {
  DANCE_0, // ESC
  DANCE_1, // TAB
  DANCE_2, // Copy Pasta
  DANCE_3, // Layers
  DANCE_4, // numpad
  DANCE_5, // numpad
  DANCE_6, // numpad
  DANCE_7, // try space/layer since it gets stuck
  DANCE_8,
  DANCE_9,
  DANCE_10,  // numpad
};


enum preonic_keycodes {
  QWERTY = SAFE_RANGE,
  COLEMAK,
  DVORAK,
  LOWER,
  RAISE,
  BACKLIT,
  ST_MACRO_0,
  ST_MACRO_1,
  KVM1,
  KVM2,
  KVM3,
  KVM4,
  ST_MACRO_4,
  L7_MACRO_1,
  L7_MACRO_2,
  L7_MACRO_3,
  L7_MACRO_4,
  L7_MACRO_5,
  L7_MACRO_6,
  L7_MACRO_7,
  L7_MACRO_8,
  L7_MACRO_9,
  L7_MACRO_10,
  L7_MACRO_11,
  MRO_SPC_PERIOD,
  MRO_SPC_COMMA,
  MRO_SPC_EX,
  MRO_SPC_QUESTION,
  MRO_SPC_MINUS,
  MRO_COPY_PASTA,
  MRO_BACKSPACE_WORD,
  MRO_ALTTAB,
  BS2,
  BS3,
  BS4,
  BS5,
  BS6,
  LEADER,
  RGB_SLD,
  HSV_0_255_255,
  HSV_86_255_128,
  HSV_172_255_255,
  HSV_0_255_85,
  STATIC,
  TOGGLE,
  LLOCK,
  LOCKMOUSE,
  ALTTAB_ON,
  ALTTAB_OFF,
  //SPACE_NUMBERS

};
enum layernames {
/*L_GAMING = 0,*/
L_COLEMAK = 0,
L_GAMING, //1
L_GAMINGQWERTY, //1
L_NUMPADLEFT,
L_NUMPADRIGHT,
L_NAVIGATION,
L_SYMBOL,
L_NUMBERS,
L_MEDIA,
L_ALTTAB,
L_SOMETHING1,
L_SOMETHING2,
L_MACROS1,
L_MACROS2,
L_MOUSE, 
L_HYPERF,
L_MEHF,
L_WORK

};

 
const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {
/*  [L_GAMING] = LAYOUT_moonlander(
    KC_GRAVE,       KC_1,           KC_2,           KC_3,           KC_4,           KC_5,           KC_6,                                           KC_RIGHT,       KC_6,           KC_7,           KC_8,           KC_9,           KC_0,           KC_MINUS,       
    KC_TAB,         KC_Q,           KC_W,           KC_F,           KC_P,           KC_B,           KC_I,                                           KC_TRANSPARENT, KC_J,           KC_L,           KC_U,           KC_Y,           KC_MINUS,       KC_BSLS,      
    KC_F1,          KC_A,           KC_R,           KC_S,           KC_T,           KC_G,           KC_M,                       KC_TRANSPARENT, KC_M,           KC_N,           KC_E,           KC_I,           KC_O,           KC_BSPC,      
    KC_LSFT,      KC_Z,           KC_X,           KC_C,           KC_D,           KC_V,                                           KC_K,           KC_H,           KC_COMMA,       KC_DOT,         KC_SLASH,       KC_RSFT,      
    KC_LCTL,       KC_F2,          KC_F3,          KC_F4,          KC_F5,          _______,                                   TO(L_COLEMAK),      KC_TRANSPARENT, KC_TRANSPARENT, KC_TRANSPARENT, KC_TRANSPARENT, KC_TRANSPARENT, 
    KC_SPACE,       KC_LALT,        KC_LGUI,                        KC_ESC,        KC_DELETE,         KC_ENTER
  ),*/
/*  [L_COLEMAK] = LAYOUT_moonlander(
 //,---------------------------------------------------------------------------------------------------------------.                          ,----------------------------------------------------------------------------------------------------------------.
      SH_OS  ,               KC_1,            KC_2,                KC_3,            KC_4,            KC_5,           XXXXXXX,            XXXXXXX,       KC_6,            KC_7,            KC_8,            KC_9,              KC_0,             SH_OS,
  //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|
      LT(L_MACROS2,KC_ESC), LT(L_SOMETHING2,KC_Q),  KC_W,        KC_F,             KC_P,               KC_B,        XXXXXXX,            XXXXXXX,          KC_J,            KC_L,           KC_U,                 KC_Y,          KC_MINUS,          KC_EQUAL,
 //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|
    LT(L_MACROS1,KC_TAB), MT(MOD_LCTL,KC_A), MT(MOD_LALT,KC_R), MT(MOD_LGUI,KC_S), MT(MOD_LSFT,KC_T), MT(MOD_LGUI,KC_G), XXXXXXX,     XXXXXXX,  MT(MOD_RGUI,KC_M), MT(MOD_RSFT,KC_N), MT(MOD_RGUI,KC_E), MT(MOD_RALT,KC_I), MT(MOD_RCTL,KC_O),  XXXXXXX,
 //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|
      KC_MS_WH_UP,          MT(MOD_LSFT,KC_Z),       KC_X,             KC_C,         MT(MOD_MEH,KC_D),  MT(MOD_HYPR,KC_V),                              KC_K,              KC_H,              KC_COMMA,          KC_DOT,        KC_SLASH,        XXXXXXX,
 //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|
      KC_MS_WH_DOWN,      KC_MS_BTN2,       KC_MS_BTN3,      KC_MS_BTN1,        MO(L_NAVIGATION),                TO(L_GAMING),           _______,                   MO(L_SYMBOL),       TT(L_NUMPAD),    TT(L_NAVIGATION),    TT(L_MOUSE),        LEADER,
 //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|

                                                        MT(MOD_LSFT,KC_SPC),      TT(L_NUMPAD),     LT(L_SOMETHING1,KC_BSPC),         LT(L_SOMETHING1,KC_BSPC),     MO(L_NUMPADTEST),    MT(MOD_RSFT,KC_SPC) 
                                                        //`--------------------------------------------------------'                          `--------------------------------------------------------'
  ),*/
    [L_COLEMAK] = LAYOUT_moonlander(
 //,---------------------------------------------------------------------------------------------------------------.                          ,----------------------------------------------------------------------------------------------------------------.
      SH_OS  ,               KC_1,            KC_2,                KC_3,            KC_4,            KC_5,           XXXXXXX,            XXXXXXX,       KC_6,            KC_7,            KC_8,            KC_9,              KC_0,             SH_OS,
  //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|
      LT(L_MACROS2,KC_ESC), LT(L_SOMETHING2,KC_Q),  KC_W,        KC_F,             KC_P,               KC_B,        XXXXXXX,            XXXXXXX,          KC_J,            KC_L,           KC_U,                 KC_Y,          KC_MINUS,          XXXXXXX,
 //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|
    LT(L_MACROS1,KC_TAB), MT(MOD_LCTL,KC_A), MT(MOD_LALT,KC_R), MT(MOD_LGUI,KC_S), MT(MOD_LSFT,KC_T), MT(MOD_LGUI,KC_G), XXXXXXX,     XXXXXXX,  MT(MOD_RGUI,KC_M), MT(MOD_RSFT,KC_N), MT(MOD_RGUI,KC_E), MT(MOD_RALT,KC_I), MT(MOD_RCTL,KC_O),   LT(L_SOMETHING1,KC_BSPC),
 //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|
      KC_LSFT,          MT(MOD_LSFT,KC_Z),       KC_X,             KC_C,         MT(MOD_MEH,KC_D),  MT(MOD_HYPR,KC_V),                         MT(MOD_HYPR,KC_K), MT(MOD_MEH,KC_H),       KC_COMMA,          KC_DOT,           KC_SLASH,     KC_RSFT,
 //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|
      TT(L_NUMPADLEFT),    MO(L_MEHF),         MO(L_HYPERF),     MO(L_MOUSE),        MO(L_NAVIGATION),                TD(DANCE_7),           XXXXXXX,                   MO(L_SYMBOL),    MO(L_HYPERF),    MO(L_MEHF),      TO(L_NUMPADRIGHT),     LEADER,
 //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|

                                                        LT(L_NUMBERS,KC_SPC),  KC_LSFT,    ALTTAB_ON,                                        ALTTAB_ON,   KC_BSPC,   MO(L_NUMBERS)   //LT(L_NUMBERS,KC_SPC)
                                                        //`--------------------------------------------------------'                          `--------------------------------------------------------'
  ),
[L_GAMING] = LAYOUT_moonlander(
    KC_GRAVE,  KC_1,           KC_2,           KC_3,           KC_4,           KC_5,           KC_6,                           KC_RIGHT,       KC_6,           KC_7,           KC_8,           KC_9,           KC_0,           KC_MINUS,       
    KC_F1,     KC_Q,           KC_W,           KC_F,           KC_P,           KC_B,           KC_I,                           KC_TRANSPARENT, KC_J,           KC_L,           KC_U,           KC_Y,           KC_MINUS,       KC_BSLS,      
    KC_TAB,    KC_A,           KC_R,           KC_S,           KC_T,           KC_G,           KC_M,                           KC_TRANSPARENT, KC_M,           KC_N,           KC_E,           KC_I,           KC_O,           KC_BSPC,      
    KC_LSFT, KC_Z,           KC_X,           KC_C,           KC_D,           KC_V,                                           KC_K,           KC_H,           KC_COMMA,       KC_DOT,         KC_SLASH,       KC_RSFT,      
    KC_LCTL,  KC_F2,          KC_F3,          KC_F4,          KC_F5,                                  KC_ESC,       TO(L_COLEMAK),           KC_TRANSPARENT, KC_TRANSPARENT, KC_TRANSPARENT, KC_TRANSPARENT, KC_TRANSPARENT, 
                                                                                      KC_SPACE,       KC_LALT,        KC_LGUI,            KC_ESC,        KC_DELETE,         KC_ENTER
  ),
[L_GAMINGQWERTY] = LAYOUT_moonlander(
    KC_GRAVE,  KC_1,           KC_2,           KC_3,           KC_4,           KC_5,           KC_6,                           KC_RIGHT,       KC_6,           KC_7,           KC_8,           KC_9,           KC_0,           KC_MINUS,       
    KC_F1,     KC_Q,           KC_W,           KC_E,           KC_R,           KC_T,           KC_I,                           KC_TRANSPARENT, KC_J,           KC_L,           KC_U,           KC_Y,           KC_MINUS,       KC_BSLS,      
    KC_TAB,    KC_A,           KC_S,           KC_D,           KC_F,           KC_G,           KC_M,                           KC_TRANSPARENT, KC_M,           KC_N,           KC_E,           KC_I,           KC_O,           KC_BSPC,      
    KC_LSFT, KC_Z,           KC_X,           KC_C,           KC_V,           KC_B,                                           KC_K,           KC_H,           KC_COMMA,       KC_DOT,         KC_SLASH,       KC_RSFT,      
    KC_LCTL,  KC_F2,          KC_F3,          KC_F4,          KC_F5,                                  KC_ESC,       TO(L_COLEMAK),           KC_TRANSPARENT, KC_TRANSPARENT, KC_TRANSPARENT, KC_TRANSPARENT, KC_TRANSPARENT, 
                                                                                      KC_SPACE,       KC_LALT,        KC_LGUI,            KC_ESC,        KC_DELETE,         KC_ENTER
  ),
  [L_NUMPADLEFT] = LAYOUT_moonlander( // SAME FINGER USAGE... 6456---
 //,---------------------------------------------------------------------------------------------------------------.                           ,----------------------------------------------------------------------------------------------------------------.
             _______,           _______,        _______,             _______,         _______,            _______,   XXXXXXX,          XXXXXXX,    _______,           _______,           _______,           _______,          _______,            _______,
  //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|    
             KC_EQUAL,          KC_ASTR,         KC_7,             KC_8,               KC_9,          TD(DANCE_5),  XXXXXXX,          XXXXXXX,     TD(DANCE_5),             KC_7,             KC_8,               KC_9,             KC_ASTR,          KC_EQUAL,
 //|-----------------+-----------------+------------------+------------------+------------------+------------------|                           |------------------+------------------+------------------+------------------+-----------------+------------------|
           KC_TAB,         KC_0,             KC_4,             KC_5,                KC_6,           TD(DANCE_4), XXXXXXX,          XXXXXXX,     TD(DANCE_4),           KC_4,             KC_5,                KC_6,                KC_0,         KC_BSPC,
 //|-----------------+-----------------+------------------+------------------+------------------+------------------|                           |------------------+------------------+------------------+------------------+-----------------+------------------|
           KC_DELETE,      KC_SLASH,            KC_1,             KC_2,               KC_3,            TD(DANCE_6),                                TD(DANCE_6),         KC_1,             KC_2,               KC_3,             KC_SLASH,         KC_DELETE,
 //|-----------------+-----------------+------------------+------------------+------------------+------------------|                           |------------------+------------------+------------------+------------------+-----------------+------------------|
   _______,           XXXXXXX,            XXXXXXX,        MO(L_NAVIGATION),            KC_0,                           KC_BSPC,           TO(L_COLEMAK),                       _______,           _______,           _______,            XXXXXXX,        XXXXXXX,
 //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|           
                                                                KC_SPACE,             KC_ENTER,             KC_BSPC,                                       KC_BSPC,            KC_ENTER,             KC_SPACE
                                                        //`--------------------------------------------------------'                           `--------------------------------------------------------'
  ),
   [L_NUMPADRIGHT] = LAYOUT_moonlander( // SAME FINGER USAGE... 6456---
 //,---------------------------------------------------------------------------------------------------------------.                           ,----------------------------------------------------------------------------------------------------------------.
               XXXXXXX,           XXXXXXX,            XXXXXXX,         XXXXXXX,            XXXXXXX,    XXXXXXX,   XXXXXXX,          XXXXXXX,      XXXXXXX,           XXXXXXX,            XXXXXXX,         XXXXXXX,            XXXXXXX,    XXXXXXX, 
  //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|    
              KC_ESC,           XXXXXXX,            XXXXXXX,         XXXXXXX,            XXXXXXX,    XXXXXXX,   XXXXXXX,          XXXXXXX,     TD(DANCE_5),             KC_7,             KC_8,               KC_9,             KC_ASTR,          KC_EQUAL,
 //|-----------------+-----------------+------------------+------------------+------------------+------------------|                           |------------------+------------------+------------------+------------------+-----------------+------------------|
          KC_TAB,           OSM(MOD_LCTL),    OSM(MOD_LALT),    OSM(MOD_LGUI),    TD(DANCE_2),       OSM(MOD_LGUI), XXXXXXX,          XXXXXXX,     TD(DANCE_4),           KC_4,             KC_5,                KC_6,                KC_0,         KC_BSPC,
 //|-----------------+-----------------+------------------+------------------+------------------+------------------|                           |------------------+------------------+------------------+------------------+-----------------+------------------|
          OSM(MOD_LSFT),    KC_LSFT,           XXXXXXX,          XXXXXXX,          OSM(MOD_MEH),      OSM(MOD_HYPR),                               TD(DANCE_6),         KC_1,             KC_2,               KC_3,             KC_SLASH,         KC_DELETE,
 //|-----------------+-----------------+------------------+------------------+------------------+------------------|                           |------------------+------------------+------------------+------------------+-----------------+------------------|
   XXXXXXX,           XXXXXXX,            XXXXXXX,           XXXXXXX,          MO(L_NAVIGATION),                    XXXXXXX,       TO(L_COLEMAK),                       KC_0,           XXXXXXX,           XXXXXXX,            TO(L_COLEMAK),        XXXXXXX,
 //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|           
                                                                KC_SPACE,             KC_ENTER,             KC_BSPC,                                       KC_BSPC,            KC_ENTER,             KC_SPACE
                                                        //`--------------------------------------------------------'                           `--------------------------------------------------------'
  ),
  [L_NAVIGATION] = LAYOUT_moonlander(
 //,---------------------------------------------------------------------------------------------------------------.                          ,----------------------------------------------------------------------------------------------------------------.
          LLOCK,           _______,        _______,             _______,         _______,            _______,      XXXXXXX,          XXXXXXX,    _______,           _______,           _______,           _______,          _______,            _______,
  //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|
       _______,           KC_MS_WH_UP,      KC_MS_BTN2,       KC_MS_BTN3,       KC_MS_BTN1,        KC_MS_WH_DOWN,    XXXXXXX,           XXXXXXX,     XXXXXXX,            KC_PGUP,           KC_UP,          KC_PGDN,           XXXXXXX,          XXXXXXX,
 //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|
       KC_TAB,           OSM(MOD_LCTL),    OSM(MOD_LALT),    OSM(MOD_LGUI),    TD(DANCE_2),       OSM(MOD_LGUI),     XXXXXXX,            XXXXXXX,     KC_HOME,            KC_LEFT,          KC_DOWN,        KC_RIGHT,           KC_END,      KC_DELETE,
 //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|
       OSM(MOD_LSFT),    KC_LSFT,           XXXXXXX,          XXXXXXX,          OSM(MOD_MEH),      OSM(MOD_HYPR),                                   XXXXXXX,           MRO_SPC_EX,     MRO_SPC_COMMA,    MRO_SPC_PERIOD,  MRO_SPC_QUESTION,      _______,
 //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|
   _______,           _______,            _______,        LLOCK,            _______,                           XXXXXXX,           TO(L_COLEMAK),                    MO(L_MEDIA),           _______,           _______,            _______,        XXXXXXX,
 //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|
                                                              KC_ENTER,          KC_DELETE,             XXXXXXX,                                      XXXXXXX,         KC_DELETE,            KC_ENTER
                                                        //`--------------------------------------------------------'                          `--------------------------------------------------------'
  ),
  [L_SYMBOL] = LAYOUT_moonlander(
 //,---------------------------------------------------------------------------------------------------------------.                           ,----------------------------------------------------------------------------------------------------------------.
          _______,            KC_F1,         KC_F2,              KC_F3,          KC_F4,             KC_F5,         XXXXXXX,           XXXXXXX,          KC_F6,            KC_F7,            KC_F8,            KC_F9,           KC_F10,            _______,
  //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|    
       _______,             KC_GRAVE,        KC_LCBR,           KC_DLR,           KC_RCBR,            XXXXXXX,      XXXXXXX,          XXXXXXX,          KC_CIRC,         KC_AMPR,          KC_PLUS,           KC_EQUAL,          KC_UNDS,         XXXXXXX,
 //|-----------------+-----------------+------------------+------------------+------------------+------------------|                           |------------------+------------------+------------------+------------------+-----------------+------------------|
        _______,           KC_TILD,        KC_LPRN,             KC_HASH,         KC_RPRN,            KC_LT,       XXXXXXX,          XXXXXXX,           KC_GT,         KC_DQUO,          KC_QUOTE,           KC_COLN,          KC_SCLN,       _______,
 //|-----------------+-----------------+------------------+------------------+------------------+------------------|                           |------------------+------------------+------------------+------------------+-----------------+------------------|
        _______,           KC_EXLM,        KC_LBRC,         KC_AT,          KC_RBRC,         XXXXXXX,                                        XXXXXXX,           KC_PERC,         KC_ASTR,              KC_PIPE,        KC_BSLS,        _______,
 //|-----------------+-----------------+------------------+------------------+------------------+------------------|                           |------------------+------------------+------------------+------------------+-----------------+------------------|
   _______,           _______,            _______,        _______,            MO(L_MEDIA),                           XXXXXXX,           TO(L_COLEMAK),                       _______,           _______,           _______,            _______,        XXXXXXX,
 //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|
                                                                   KC_ENTER,        _______,           KC_DELETE,                                        _______,         _______,           KC_ENTER
                                                        //`--------------------------------------------------------'                           `--------------------------------------------------------'

  ),
 //  [L_NUMPADLEFT] = LAYOUT_moonlander( // SAME FINGER USAGE... 6456---
 // //,---------------------------------------------------------------------------------------------------------------.                           ,----------------------------------------------------------------------------------------------------------------.
 //             _______,           _______,        _______,             _______,         _______,            _______,   XXXXXXX,          XXXXXXX,    _______,           _______,           _______,           _______,          _______,            _______,
 //  //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|    
 //             KC_EQUAL,          KC_ASTR,         KC_7,             KC_8,               KC_9,          TD(DANCE_5),  XXXXXXX,          XXXXXXX,     TD(DANCE_5),             KC_7,             KC_8,               KC_9,             KC_ASTR,          KC_EQUAL,
 // //|-----------------+-----------------+------------------+------------------+------------------+------------------|                           |------------------+------------------+------------------+------------------+-----------------+------------------|
 //           KC_TAB,         KC_0,             KC_4,             KC_5,                KC_6,           TD(DANCE_4), XXXXXXX,          XXXXXXX,     TD(DANCE_4),           KC_4,             KC_5,                KC_6,                KC_0,         KC_BSPC,
 // //|-----------------+-----------------+------------------+------------------+------------------+------------------|                           |------------------+------------------+------------------+------------------+-----------------+------------------|
 //           KC_DELETE,      KC_SLASH,            KC_1,             KC_2,               KC_3,            TD(DANCE_6),                                TD(DANCE_6),         KC_1,             KC_2,               KC_3,             KC_SLASH,         KC_DELETE,
 // //|-----------------+-----------------+------------------+------------------+------------------+------------------|                           |------------------+------------------+------------------+------------------+-----------------+------------------|
 //   _______,           XXXXXXX,            XXXXXXX,        XXXXXXX,            KC_0,                           KC_BSPC,           TO(L_COLEMAK),                       _______,           _______,           _______,            XXXXXXX,        XXXXXXX,
 // //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|           
 //                                                                KC_SPACE,             KC_ENTER,             KC_BSPC,                                       KC_BSPC,            KC_ENTER,             KC_SPACE
 //                                                        //`--------------------------------------------------------'                           `--------------------------------------------------------'
 //  ),
 //   [L_NUMPADRIGHT] = LAYOUT_moonlander( // SAME FINGER USAGE... 6456---
 // //,---------------------------------------------------------------------------------------------------------------.                           ,----------------------------------------------------------------------------------------------------------------.
 //               XXXXXXX,           XXXXXXX,            XXXXXXX,         XXXXXXX,            XXXXXXX,    XXXXXXX,   XXXXXXX,          XXXXXXX,      XXXXXXX,           XXXXXXX,            XXXXXXX,         XXXXXXX,            XXXXXXX,    XXXXXXX, 
 //  //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|    
 //              XXXXXXX,           XXXXXXX,            XXXXXXX,         XXXXXXX,            XXXXXXX,    XXXXXXX,   XXXXXXX,          XXXXXXX,     TD(DANCE_5),             KC_7,             KC_8,               KC_9,             KC_ASTR,          KC_EQUAL,
 // //|-----------------+-----------------+------------------+------------------+------------------+------------------|                           |------------------+------------------+------------------+------------------+-----------------+------------------|
 //          KC_TAB,           OSM(MOD_LCTL),    OSM(MOD_LALT),    OSM(MOD_LGUI),    TD(DANCE_2),       OSM(MOD_LGUI), XXXXXXX,          XXXXXXX,     TD(DANCE_4),           KC_4,             KC_5,                KC_6,                KC_0,         KC_BSPC,
 // //|-----------------+-----------------+------------------+------------------+------------------+------------------|                           |------------------+------------------+------------------+------------------+-----------------+------------------|
 //          OSM(MOD_LSFT),    KC_LSFT,           XXXXXXX,          XXXXXXX,          OSM(MOD_MEH),      OSM(MOD_HYPR),                               TD(DANCE_6),         KC_1,             KC_2,               KC_3,             KC_SLASH,         KC_DELETE,
 // //|-----------------+-----------------+------------------+------------------+------------------+------------------|                           |------------------+------------------+------------------+------------------+-----------------+------------------|
 //   XXXXXXX,           XXXXXXX,            XXXXXXX,           XXXXXXX,          MO(L_NAVIGATION),                    XXXXXXX,       TO(L_COLEMAK),                       KC_0,           XXXXXXX,           XXXXXXX,            XXXXXXX,        XXXXXXX,
 // //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|           
 //                                                                KC_SPACE,             KC_ENTER,             KC_BSPC,                                       KC_BSPC,            KC_ENTER,             KC_SPACE
 //                                                        //`--------------------------------------------------------'                           `--------------------------------------------------------'
 //  ),
    [L_NUMBERS] = LAYOUT_moonlander( 
 //,---------------------------------------------------------------------------------------------------------------.                           ,----------------------------------------------------------------------------------------------------------------.
             KC_F1,           KC_F2,      KC_F3,                KC_F4,                KC_F5,    KC_F6,               XXXXXXX,          XXXXXXX,       KC_F7,               KC_F8,           KC_F9,             KC_F10,           KC_F11,          KC_F12,
  //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|    
              XXXXXXX,        XXXXXXX,      XXXXXXX,            XXXXXXX,            XXXXXXX,            XXXXXXX,     XXXXXXX,       XXXXXXX,          XXXXXXX,         XXXXXXX,          XXXXXXX,            XXXXXXX,          XXXXXXX,            XXXXXXX,         
 //|-----------------+-----------------+------------------+------------------+------------------+------------------|                           |------------------+------------------+------------------+------------------+-----------------+------------------|
           KC_TAB,        KC_1,              KC_2,         KC_3,               KC_4,               KC_5,          XXXXXXX,          XXXXXXX,        KC_6,           KC_7,             KC_8,                KC_9,                KC_0,         KC_BSPC,
 //|-----------------+-----------------+------------------+------------------+------------------+------------------|                           |------------------+------------------+------------------+------------------+-----------------+------------------|
           XXXXXXX,        XXXXXXX,           XXXXXXX,      XXXXXXX,                XXXXXXX,           XXXXXXX,                                     XXXXXXX,        XXXXXXX,            KC_COMMA,      KC_DOT,                KC_SLASH,           XXXXXXX, 
 //|-----------------+-----------------+------------------+------------------+------------------+------------------|                           |------------------+------------------+------------------+------------------+-----------------+------------------|
   XXXXXXX,           XXXXXXX,            XXXXXXX,        XXXXXXX,            _______,                           XXXXXXX,           TO(L_COLEMAK),                       _______,           _______,           _______,            XXXXXXX,        XXXXXXX,
 //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|           
                                                             KC_SPACE,            _______,          _______,                                      _______,          _______,           _______
                                                        //`--------------------------------------------------------'                           `--------------------------------------------------------'
  ),
  [L_MEDIA] = LAYOUT_moonlander(
 //,---------------------------------------------------------------------------------------------------------------.                           ,----------------------------------------------------------------------------------------------------------------.
      _______,           _______,        _______,             _______,         _______,            _______,          XXXXXXX,            XXXXXXX,    _______,           _______,           _______,           EE_CLR,          MAGIC_TOGGLE_NKRO,            QK_BOOT,
  //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------| 
       _______,          AU_TOG,      TOGGLE_LAYER_COLOR,   RGB_SPD,        RGB_SPI,            XXXXXXX,               XXXXXXX,             XXXXXXX,    XXXXXXX,        _______,         _______,           _______,          _______,    _______,
 //|-----------------+-----------------+------------------+------------------+------------------+------------------|                           |------------------+------------------+------------------+------------------+-----------------+------------------|
       _______,           STATIC,         RGB_TOG,        RGB_VAD,        RGB_VAI,         RGB_SAI,                  XXXXXXX,             XXXXXXX,    _______,       KC_AUDIO_VOL_UP,   KC_MEDIA_PLAY_PAUSE,   _______,        _______,            _______,
 //|-----------------+-----------------+------------------+------------------+------------------+------------------|                           |------------------+------------------+------------------+------------------+-----------------+------------------|
       _______,           TOGGLE,         RGB_MOD,        RGB_HUD,        RGB_HUI,      RGB_SAD,                                        _______,      KC_AUDIO_VOL_DOWN, KC_MEDIA_PREV_TRACK,KC_MEDIA_NEXT_TRACK,KC_MEDIA_PLAY_PAUSE,  _______,
 //|-----------------+-----------------+------------------+------------------+------------------+------------------|                           |------------------+------------------+------------------+------------------+-----------------+------------------|
          XXXXXXX,           RGB_SLD,        RGB_SAD,        RGB_SAI,            _______,                           XXXXXXX,           TO(L_COLEMAK),                       _______,           XXXXXXX,           XXXXXXX,            XXXXXXX,        XXXXXXX,
 //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|   
                                                                 _______,            _______,          _______,                                      _______,          _______,           _______
                                                        //`--------------------------------------------------------'                           `--------------------------------------------------------'
  ),
[L_ALTTAB] = LAYOUT_moonlander(
  //,---------------------------------------------------------------------------------------------------------------.                           ,----------------------------------------------------------------------------------------------------------------.
                 _______,           _______,        _______,             _______,         _______,            _______, XXXXXXX,          XXXXXXX,         _______,           _______,           _______,           _______,          _______,            _______,
  //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------| 
          _______,            _______,           _______,            _______,         _______,            _______,      XXXXXXX,          XXXXXXX,           XXXXXXX,            KC_PGUP,           KC_UP,          KC_PGDN,           XXXXXXX,          XXXXXXX,
  //|-----------------+-----------------+------------------+------------------+------------------+------------------|                           |------------------+------------------+------------------+------------------+-----------------+------------------|
          _______,           _______,           _______,            _______,         _______,            _______,     XXXXXXX,          XXXXXXX,       KC_HOME,            KC_LEFT,          KC_DOWN,        KC_RIGHT,           XXXXXXX,      KC_DELETE,
  //|-----------------+-----------------+------------------+------------------+------------------+------------------|                           |------------------+------------------+------------------+------------------+-----------------+------------------|
            _______,           _______,           _______,            _______,         _______,            _______,                                  _______,          _______,          _______,            _______,          _______,          _______,
  //|-----------------+-----------------+------------------+------------------+------------------+------------------|                           |------------------+------------------+------------------+------------------+-----------------+------------------|
          _______,           _______,            _______,        _______,            _______,                           XXXXXXX,           TO(L_COLEMAK),                       _______,           _______,           _______,            _______,        _______   ,
 //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|   
                                                               _______,            _______,          _______,                                      _______,          _______,           _______
                                                        //`--------------------------------------------------------'                           `--------------------------------------------------------'
  ),
  [L_SOMETHING1] = LAYOUT_moonlander(
  //,---------------------------------------------------------------------------------------------------------------.                           ,----------------------------------------------------------------------------------------------------------------.
                 _______,           _______,        _______,             _______,         _______,            _______, XXXXXXX,          XXXXXXX,         _______,           _______,           _______,           _______,          _______,            _______,
  //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------| 
          _______,            _______,           _______,            _______,         _______,            _______,      XXXXXXX,          XXXXXXX,           _______,          _______,          _______,            _______,          _______,          _______,
  //|-----------------+-----------------+------------------+------------------+------------------+------------------|                           |------------------+------------------+------------------+------------------+-----------------+------------------|
          _______,           _______,           _______,            _______,         _______,            _______,     XXXXXXX,          XXXXXXX,         BS6,              BS5,            BS4,                  BS3,          _______,          _______,
  //|-----------------+-----------------+------------------+------------------+------------------+------------------|                           |------------------+------------------+------------------+------------------+-----------------+------------------|
            _______,           _______,           _______,            _______,         _______,            _______,                                  _______,          _______,          _______,            _______,          _______,          _______,
  //|-----------------+-----------------+------------------+------------------+------------------+------------------|                           |------------------+------------------+------------------+------------------+-----------------+------------------|
          XXXXXXX,           XXXXXXX,            XXXXXXX,        XXXXXXX,            _______,                           XXXXXXX,           TO(L_COLEMAK),                       _______,           XXXXXXX,           XXXXXXX,            XXXXXXX,        XXXXXXX,
 //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|   
                                                               _______,            _______,          _______,                                      _______,          _______,           _______
                                                        //`--------------------------------------------------------'                           `--------------------------------------------------------'
  ),
  [L_SOMETHING2] = LAYOUT_moonlander(
  //,---------------------------------------------------------------------------------------------------------------.                          ,----------------------------------------------------------------------------------------------------------------.
                     _______,           _______,        _______,             _______,         _______,            _______,  XXXXXXX,          XXXXXXX,       _______,           _______,           _______,           _______,          _______,            _______,
  //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------| 
          _______,         _______,           LGUI(KC_BSLS),        LSFT(LGUI(KC_X)),      _______,            LCTL(KC_UP),     XXXXXXX,          XXXXXXX,       _______,            _______,            _______,           _______,           RESET,         _______,
  //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|
           _______,         _______,           _______,             _______,       _______,            _______,        XXXXXXX,          XXXXXXX,        _______,          _______,            _______,           _______,           _______,          _______,
  //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|
           _______,         _______,           _______,             _______,      _______,            _______,                                       _______,            _______,            _______,           _______,           _______,          _______,
  //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|
          XXXXXXX,           XXXXXXX,            XXXXXXX,        XXXXXXX,            _______,                           XXXXXXX,           TO(L_COLEMAK),                       _______,           _______,           _______,            _______,        XXXXXXX,
 //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|   
                                                                 TO(L_MOUSE),         _______,           _______,                                           _______,            _______,          _______
                                                         //`--------------------------------------------------------'                          `--------------------------------------------------------'

  ),
  [L_MACROS1] = LAYOUT_moonlander(
    //,---------------------------------------------------------------------------------------------------------------.                          ,----------------------------------------------------------------------------------------------------------------.
                     _______,           _______,        _______,             _______,         _______,            _______,XXXXXXX,          XXXXXXX,     _______,           _______,           _______,           _______,          _______,            _______,
  //|-----------------+-----------------+------------------+------------------+------------------+------------------|                           |------------------+------------------+------------------+------------------+-----------------+------------------| 
              _______,         L7_MACRO_11,        XXXXXXX,          XXXXXXX,        XXXXXXX,             XXXXXXX,      XXXXXXX,          XXXXXXX,       KC_F1,              KC_F2,          KC_F3,            KC_F4,             KC_F5,           TO(L_COLEMAK),
    //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|
              _______,        L7_MACRO_1,      L7_MACRO_2,       L7_MACRO_3,       L7_MACRO_4,         L7_MACRO_5,    XXXXXXX,          XXXXXXX,         KC_F6,              KC_F7,          KC_F8,            KC_F9,             KC_F10,           _______,
    //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|
              _______,         L7_MACRO_6,     L7_MACRO_7,      L7_MACRO_8,        L7_MACRO_9,        L7_MACRO_10,                                     KC_F11,              KC_F12,          KC_F13,            KC_F14,             KC_F15,           _______,
    //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|
              XXXXXXX,           XXXXXXX,            XXXXXXX,        XXXXXXX,            _______,                           XXXXXXX,           TO(L_COLEMAK),                       _______,           _______,           _______,            _______,        XXXXXXX,
 //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|   
                                                                   _______,           _______,          _______,                                        _______,          _______,          _______
                                                           //`--------------------------------------------------------'                          `--------------------------------------------------------'
  ),
  [L_MACROS2] = LAYOUT_moonlander(
    //,------------------------------r---------------------------------------------------------------------------------.                          ,----------------------------------------------------------------------------------------------------------------.
         XXXXXXX,          KC_F1,           KC_F2,      KC_F3,                KC_F4,                KC_F5,      XXXXXXX,          XXXXXXX,      KC_F6,               KC_F7,               KC_F8,           KC_F9,             KC_F10,           KC_F11,
  //|-----------------+-----------------+------------------+------------------+------------------+------------------|                           |------------------+------------------+------------------+------------------+-----------------+------------------| 
            _______,        KVM1,            KVM2,                 KVM3,              KVM4,         LCTL(LGUI(KC_Q)),   XXXXXXX,          XXXXXXX,      XXXXXXX,          XXXXXXX,          XXXXXXX,            XXXXXXX,          XXXXXXX,          KC_F12,
    //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|
            XXXXXXX,            XXXXXXX,           XXXXXXX,            XXXXXXX,         KC_SCROLL_LOCK,            KC_DEL,    XXXXXXX,          XXXXXXX,      XXXXXXX,          XXXXXXX,          XXXXXXX,            XXXXXXX,          XXXXXXX,          XXXXXXX,
    //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|
              XXXXXXX,           XXXXXXX,           XXXXXXX,            XXXXXXX,         KC_RCTL,            XXXXXXX,                                XXXXXXX,          XXXXXXX,          XXXXXXX,            XXXXXXX,          XXXXXXX,          XXXXXXX,
    //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|
              XXXXXXX,           XXXXXXX,            XXXXXXX,        XXXXXXX,            _______,                           XXXXXXX,            TO(L_COLEMAK),                       _______,           _______,           _______,            _______,        XXXXXXX,
   //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|                
                                                                 _______,            _______,          _______,                                     _______,          _______,           _______
                                                          //`--------------------------------------------------------'                          `--------------------------------------------------------'
  ),
  [L_MOUSE] = LAYOUT_moonlander(
  //,---------------------------------------------------------------------------------------------------------------.                          ,----------------------------------------------------------------------------------------------------------------.
           LLOCK,           _______,        _______,             _______,         _______,            _______, XXXXXXX,          XXXXXXX,          _______,           _______,           _______,           _______,          _______,            _______,
  //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------| 
        _______,           KC_LOPT,   TD(DANCE_2),        KC_MS_WH_UP,    XXXXXXX,            XXXXXXX,            XXXXXXX,          XXXXXXX,          XXXXXXX,            XXXXXXX,         KC_MS_UP,          XXXXXXX,              XXXXXXX,        _______,
  //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|
        KC_TAB,           KC_LCTL,    KC_MS_BTN2,         KC_MS_BTN3,      KC_MS_BTN1,         TD(DANCE_2),    XXXXXXX,          XXXXXXX,               XXXXXXX,            KC_MS_LEFT,         KC_MS_DOWN,      KC_MS_RIGHT,            XXXXXXX,         _______,
  //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|
       KC_LSFT,    KC_LGUI,      XXXXXXX,        KC_MS_WH_DOWN,      LLOCK,           XXXXXXX,                                       XXXXXXX,            XXXXXXX,     XXXXXXX,    XXXXXXX,  XXXXXXX,      _______,
  //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|
              XXXXXXX,           XXXXXXX,            _______,        _______,            LLOCK,                           XXXXXXX,            TO(L_COLEMAK),                       _______,           _______,           _______,            _______,        XXXXXXX,
   //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|   
                                                               _______,           _______,          _______,                                        _______,          _______,          _______
                                                         //`--------------------------------------------------------'                          `--------------------------------------------------------'
  ),
 // [L_GAMING1] = LAYOUT_moonlander(
 //    //,---------------------------------------------------------------------------------------------------------------.                          ,----------------------------------------------------------------------------------------------------------------.
 //            _______,           KC_GRAVE,        KC_F7,             KC_F8,         KC_F9,            KC_F10,  XXXXXXX,          XXXXXXX,           _______,           _______,           _______,           _______,          _______,            _______,
 //  //|-----------------+-----------------+------------------+------------------+------------------+------------------|                           |------------------+------------------+------------------+------------------+-----------------+------------------| 
 //             _______,            XXXXXXX,           XXXXXXX,            XXXXXXX,         XXXXXXX,            XXXXXXX,    XXXXXXX,          XXXXXXX,        XXXXXXX,          XXXXXXX,          XXXXXXX,            XXXXXXX,          XXXXXXX,          _______,
 //    //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|
 //            _______,           XXXXXXX,           XXXXXXX,            XXXXXXX,         XXXXXXX,            XXXXXXX,     XXXXXXX,          XXXXXXX,       XXXXXXX,          XXXXXXX,          XXXXXXX,            XXXXXXX,          XXXXXXX,          _______,
 //    //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|
 //              _______,           XXXXXXX,           XXXXXXX,            XXXXXXX,         XXXXXXX,            XXXXXXX,                                  XXXXXXX,          XXXXXXX,          XXXXXXX,            XXXXXXX,          XXXXXXX,          _______,
 //    //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|
 //              _______,           XXXXXXX,            XXXXXXX,        XXXXXXX,            _______,                           XXXXXXX,            TO(L_COLEMAK),                       _______,           _______,           _______,            _______,        XXXXXXX,
 //   //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|   
 //                                                                 _______,            _______,          _______,                                     _______,          _______,           _______
 //                                                          //`--------------------------------------------------------'                          `--------------------------------------------------------'
 //  ),
 //  [L_GAMING2] = LAYOUT_moonlander(
 //    //,---------------------------------------------------------------------------------------------------------------.                          ,----------------------------------------------------------------------------------------------------------------.
 //                     _______,           KC_J,        KC_L,             KC_U,         KC_Y,            KC_MINUS,  XXXXXXX,          XXXXXXX,           _______,           _______,           _______,           _______,          _______,            _______,
 //  //|-----------------+-----------------+------------------+------------------+------------------+------------------|                           |------------------+------------------+------------------+------------------+-----------------+------------------| 
 //             _______,            KC_M,           KC_N,            KC_E,         KC_I,            KC_O,    XXXXXXX,          XXXXXXX,        XXXXXXX,          XXXXXXX,          XXXXXXX,            XXXXXXX,          XXXXXXX,          _______,
 //    //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|
 //            _______,           KC_K,           KC_H,            KC_COMMA,         KC_DOT,            KC_SLASH,     XXXXXXX,          XXXXXXX,       XXXXXXX,          XXXXXXX,          XXXXXXX,            XXXXXXX,          XXXXXXX,          _______,
 //    //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|
 //              _______,           XXXXXXX,           XXXXXXX,            XXXXXXX,         XXXXXXX,            XXXXXXX,                                  XXXXXXX,          XXXXXXX,          XXXXXXX,            XXXXXXX,          XXXXXXX,          _______,
 //    //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|
 //              _______,           XXXXXXX,            XXXXXXX,        XXXXXXX,            _______,                           XXXXXXX,            TO(L_COLEMAK),                       _______,           _______,           _______,            _______,        XXXXXXX,
 //   //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|   
 //                                                                 _______,            _______,          _______,                                     _______,          _______,           _______
 //                                                          //`--------------------------------------------------------'                          `--------------------------------------------------------'
 //  ),
 [L_HYPERF] = LAYOUT_moonlander(
    //,---------------------------------------------------------------------------------------------------------------.                          ,----------------------------------------------------------------------------------------------------------------.
         HYPR(KC_1),           HYPR(KC_2),    HYPR(KC_3),       HYPR(KC_4),         HYPR(KC_5),        HYPR(KC_6),   XXXXXXX,          XXXXXXX,           HYPR(KC_1),           HYPR(KC_2),        HYPR(KC_3),    HYPR(KC_4),  HYPR(KC_5),      HYPR(KC_6),
  //|-----------------+-----------------+------------------+------------------+------------------+------------------|                           |------------------+------------------+------------------+------------------+-----------------+------------------| 
      HYPR(KC_F1),          HYPR(KC_F2),      HYPR(KC_F3),      HYPR(KC_F4),          HYPR(KC_F5),     HYPR(KC_F6),  XXXXXXX,          XXXXXXX,          HYPR(KC_F1),          HYPR(KC_F2),      HYPR(KC_F3),      HYPR(KC_F4),          HYPR(KC_F5),     HYPR(KC_F6),
    //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|
      HYPR(KC_F7),          HYPR(KC_F8),      HYPR(KC_F9),      HYPR(KC_F10),          HYPR(KC_F11),   HYPR(KC_F12),    XXXXXXX,          XXXXXXX,       HYPR(KC_F7),          HYPR(KC_F8),      HYPR(KC_F9),      HYPR(KC_F10),          HYPR(KC_F11),   HYPR(KC_F12), 
    //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|
      HYPR(KC_F13),          HYPR(KC_F14),   HYPR( KC_F15),   HYPR(KC_F16),          HYPR(KC_F17),     HYPR( KC_F18),                                  HYPR(KC_F13),          HYPR(KC_F14),   HYPR( KC_F15),   HYPR(KC_F16),          HYPR(KC_F17),     HYPR( KC_F18),
    //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|
              XXXXXXX,           XXXXXXX,            _______,        XXXXXXX,            XXXXXXX,                           XXXXXXX,            TO(L_COLEMAK),                       XXXXXXX,           XXXXXXX,           _______,            XXXXXXX,        XXXXXXX,
   //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|   
                                                                 _______,            _______,          _______,                                     _______,          _______,           _______
                                                          //`--------------------------------------------------------'                          `--------------------------------------------------------'
  ),
   /// 0-15 layers stops here.. no LT, etc...

 [L_MEHF] = LAYOUT_moonlander(
    //,---------------------------------------------------------------------------------------------------------------.                          ,----------------------------------------------------------------------------------------------------------------.
         MEH(KC_1),           MEH(KC_2),    MEH(KC_3),       MEH(KC_4),         MEH(KC_5),        MEH(KC_6),   XXXXXXX,          XXXXXXX,           MEH(KC_1),           MEH(KC_2),        MEH(KC_3),    MEH(KC_4),  MEH(KC_5),      MEH(KC_6),
  //|-----------------+-----------------+------------------+------------------+------------------+------------------|                           |------------------+------------------+------------------+------------------+-----------------+------------------| 
      MEH(KC_F1),          MEH(KC_F2),      MEH(KC_F3),      MEH(KC_F4),          MEH(KC_F5),     MEH(KC_F6),  XXXXXXX,          XXXXXXX,          MEH(KC_F1),          MEH(KC_F2),      MEH(KC_F3),      MEH(KC_F4),          MEH(KC_F5),     MEH(KC_F6),
    //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|
      MEH(KC_F7),          MEH(KC_F8),      MEH(KC_F9),      MEH(KC_F10),          MEH(KC_F11),   MEH(KC_F12),    XXXXXXX,          XXXXXXX,       MEH(KC_F7),          MEH(KC_F8),      MEH(KC_F9),      MEH(KC_F10),          MEH(KC_F11),   MEH(KC_F12), 
    //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|
      MEH(KC_F13),          MEH(KC_F14),   MEH( KC_F15),   MEH(KC_F16),          MEH(KC_F17),     MEH( KC_F18),                                  MEH(KC_F13),          MEH(KC_F14),   MEH( KC_F15),   MEH(KC_F16),          MEH(KC_F17),     MEH( KC_F18),
    //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|
              XXXXXXX,           _______,            XXXXXXX,        XXXXXXX,            XXXXXXX,                           XXXXXXX,            TO(L_COLEMAK),                       XXXXXXX,           XXXXXXX,           XXXXXXX,            _______,        XXXXXXX,
   //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|   
                                                                 _______,            _______,          _______,                                     _______,          _______,           _______
                                                          //`--------------------------------------------------------'                          `--------------------------------------------------------'
  ),

  [L_WORK] = LAYOUT_moonlander(
    //,---------------------------------------------------------------------------------------------------------------.                          ,----------------------------------------------------------------------------------------------------------------.
                     _______,           _______,        _______,             _______,         _______,            _______,  XXXXXXX,          XXXXXXX,           _______,           _______,           _______,           _______,          _______,            _______,
  //|-----------------+-----------------+------------------+------------------+------------------+------------------|                           |------------------+------------------+------------------+------------------+-----------------+------------------| 
             _______,            _______,           XXXXXXX,            XXXXXXX,         XXXXXXX,            XXXXXXX,    XXXXXXX,          XXXXXXX,        XXXXXXX,          XXXXXXX,          XXXXXXX,            XXXXXXX,          XXXXXXX,          _______,
    //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|
            _______,           XXXXXXX,           XXXXXXX,            XXXXXXX,         XXXXXXX,            XXXXXXX,     XXXXXXX,          XXXXXXX,       XXXXXXX,          XXXXXXX,          XXXXXXX,            XXXXXXX,          XXXXXXX,          _______,
    //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|
              _______,           XXXXXXX,           XXXXXXX,            XXXXXXX,         XXXXXXX,            XXXXXXX,                                  XXXXXXX,          XXXXXXX,          XXXXXXX,            XXXXXXX,          XXXXXXX,          _______,
    //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|
              XXXXXXX,           XXXXXXX,            XXXXXXX,        XXXXXXX,            _______,                           XXXXXXX,            TO(L_COLEMAK),                       _______,           _______,           _______,            _______,        XXXXXXX,
   //|-----------------+-----------------+------------------+------------------+------------------+------------------|                          |------------------+------------------+------------------+------------------+-----------------+------------------|   
                                                                 _______,            _______,          _______,                                     _______,          _______,           _______
                                                          //`--------------------------------------------------------'                          `--------------------------------------------------------'
  )
};

char keylog_str[24] = {};

const char code_to_name[60] = {
    ' ', ' ', ' ', ' ', 'a', 'b', 'c', 'd', 'e', 'f',
    'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p',
    'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z',
    '1', '2', '3', '4', '5', '6', '7', '8', '9', '0',
    'R', 'E', 'B', 'T', '_', '-', '=', '[', ']', '\\',
    '#', ';', '\'', '`', ',', '.', '/', ' ', ' ', ' '};

void count_chars(uint16_t keycode, keyrecord_t *record) {
  //char name = ' ';
    if (keycount > 50) {keycount = 0;}
    if ((keycode >= QK_MOD_TAP && keycode <= QK_MOD_TAP_MAX) ||
        (keycode >= QK_LAYER_TAP && keycode <= QK_LAYER_TAP_MAX)) {
          keycode = keycode & 0xFF; }

    if (keycode < 40 && keycode > 3)  {
        keycount++;
    } else {
        keycount = 0;
    }
}



extern bool g_suspend_state;
extern rgb_config_t rgb_matrix_config;



void keyboard_post_init_user(void) {
  rgb_matrix_enable();
  rgb_matrix_sethsv_noeeprom(HSV_BLACK);
  rgb_matrix_mode_noeeprom(RGB_MATRIX_SOLID_COLOR);
}
bool static_color_mode = false;
void set_layer_anim(int layer) {
    //switch(get_highest_layer(layer_state)) {
    switch(layer) {
        case L_COLEMAK:
            rgb_matrix_mode_noeeprom(RGB_MATRIX_SOLID_COLOR);
            //rgb_matrix_set_speed_noeeprom(50);
            break;
        case L_GAMING:
            rgb_matrix_mode_noeeprom(RGB_MATRIX_CYCLE_OUT_IN_DUAL);
            rgb_matrix_set_speed_noeeprom(10);
            break;
        case L_GAMINGQWERTY:
            rgb_matrix_mode_noeeprom(RGB_MATRIX_SOLID_COLOR);
            //rgb_matrix_set_speed_noeeprom(10);
            break;
        case L_NAVIGATION: 
            rgb_matrix_mode_noeeprom(RGB_MATRIX_SOLID_COLOR);
            rgb_matrix_set_speed_noeeprom(250);
            break;
        case L_SYMBOL: 
            rgb_matrix_mode_noeeprom(RGB_MATRIX_BAND_SPIRAL_VAL);
            rgb_matrix_set_speed_noeeprom(250);
            break;
        case L_NUMPADRIGHT: 
            rgb_matrix_mode_noeeprom(RGB_MATRIX_BAND_SPIRAL_VAL);
            rgb_matrix_set_speed_noeeprom(250);
            break;
        case L_NUMPADLEFT: 
            rgb_matrix_mode_noeeprom(RGB_MATRIX_BAND_SPIRAL_VAL);
            rgb_matrix_set_speed_noeeprom(250);
            break;
        case L_NUMBERS: 
            rgb_matrix_mode_noeeprom(RGB_MATRIX_BAND_SPIRAL_VAL);
            rgb_matrix_set_speed_noeeprom(250);
            break;
        case L_MEDIA: 
            rgb_matrix_mode_noeeprom(RGB_MATRIX_BAND_SPIRAL_SAT);
            rgb_matrix_set_speed_noeeprom(250);
            break;
        case L_MOUSE: 
            rgb_matrix_mode_noeeprom(RGB_MATRIX_SOLID_COLOR);
            //rgb_matrix_mode_noeeprom(RGB_MATRIX_BREATHING);
            rgb_matrix_set_speed_noeeprom(250);
            break;
        //other layers
        default:  //for any layer not listed in this function
            rgb_matrix_mode_noeeprom(RGB_MATRIX_SOLID_COLOR);
            //rgb_matrix_set_speed_noeeprom(200);
            break;
    }
}

void set_layer_color(int layer) {
    //switch(get_highest_layer(layer_state)) {
    switch(layer) {
        case L_COLEMAK:  //layer 0
            if (workmode == 0)
                rgb_matrix_sethsv_noeeprom(HSV_BLACK);
            else
                rgb_matrix_sethsv_noeeprom(HSV_RED);
            break;
        case L_GAMING:  //layer 1
            rgb_matrix_sethsv_noeeprom(HSV_MAGENTA);
            break;
        case L_GAMINGQWERTY:  //layer 1
            rgb_matrix_sethsv_noeeprom(HSV_GREEN);
            break;
        case L_NAVIGATION:  //layer 1
            rgb_matrix_sethsv_noeeprom(HSV_BLUE);
            break;
        case L_SYMBOL:  //layer 1
            rgb_matrix_sethsv_noeeprom(HSV_GREEN);
            break;
        case L_NUMPADLEFT:  //layer 1
            rgb_matrix_sethsv_noeeprom(HSV_ORANGE);
            break;
        case L_NUMPADRIGHT:  //layer 1
            rgb_matrix_sethsv_noeeprom(HSV_WHITE);
        case L_NUMBERS:  //layer 1
            rgb_matrix_sethsv_noeeprom(HSV_PINK);
            break;
        case L_MOUSE:  //layer 1
            rgb_matrix_sethsv_noeeprom(HSV_YELLOW);
            break;
        case L_MEDIA:  //layer 1
            rgb_matrix_sethsv_noeeprom(HSV_SPRINGGREEN);
            break;
        case L_HYPERF:
        case L_MEHF:
            rgb_matrix_sethsv_noeeprom(HSV_CYAN);
            break;
        //other layers
        default:  //for any layer not listed in this function
            rgb_matrix_sethsv_noeeprom(HSV_PURPLE);
            break;
    }
}

void set_rgb_layers(int layer) {
    if (!rgb_matrix_is_enabled()) return;  //if LEDs are turned off, exit the function
        
    set_layer_color(layer);  //set color based on current layer
    
    if (static_color_mode) {  //if static color mode is active
        rgb_matrix_mode_noeeprom(RGB_MATRIX_SOLID_COLOR);  //set LEDs to solid color mode
    } else {
        set_layer_anim(layer);  //set animation based on current layer
    }
}

/* This used to work with firmware20.. now it does not, not sure why yet */

/* layer_state_set_user being called every scan!! setting #define MOONLANDER_USER_LEDS 
   skips that.. needs more investigation */

layer_state_t layer_state_set_user(layer_state_t state) {
  switch (biton32(state)) {
    //case 0:
    //  //PLAY_SONG(my_colemak_song);
    //  break;
    case L_GAMING:
      PLAY_SONG(my_gaming_song);
      break;
    case L_GAMINGQWERTY:
      PLAY_SONG(my_layer_toggle_song);
      break;
    //case L_GAMING1:
    //    PLAY_SONG(my_layer_toggle_song);
    //case L_GAMING2:
    //    PLAY_SONG(my_layer_toggle_song);
    default:
      //PLAY_SONG(my_layerbeep);
      break;
  }
  set_rgb_layers(biton32(state)); 
  return state;
}

void layer_lock_set_user(layer_state_t locked_layers) {
  // Do something like `set_led(is_layer_locked(NAV));`
    switch (biton32(locked_layers)) {
        case L_MOUSE:
            rgb_matrix_mode_noeeprom(RGB_MATRIX_BREATHING);
            rgb_matrix_set_speed_noeeprom(255);
            break;
        case L_NAVIGATION:
            rgb_matrix_mode_noeeprom(RGB_MATRIX_BREATHING);
            rgb_matrix_set_speed_noeeprom(255);
            break;
    }
}
    
bool use_default_xcase_separator(uint16_t keycode, const keyrecord_t *record) {
    switch (keycode) {
        case KC_A ... KC_Z:
        case KC_1 ... KC_0:
            return true;
    }
    return false;
}

void matrix_scan_user(void) {
    //achordion_task();
    layer_lock_task();
    // if (SPACE_NUMBER_ON){
    //     if (timer_elapsed(space_timer) > 160 && timer_elapsed(space_timer) < 500 ){
    //         if (!layer_state_is(L_NUMBERS)){
    //             layer_on(L_NUMBERS);
    //         }
    //     }
    // }
}

bool process_record_user(uint16_t keycode, keyrecord_t *record) {
    // if (record->event.pressed) {
    //    set_keylog(keycode, record);
    //
    // }
    //int i = 0;  // for backspace word
    if (!process_layer_lock(keycode, record, LLOCK)) { return false; }
    //if (!process_achordion(keycode, record)) { return false; }
    if (PARAGRAPH_MODE) {
        if (timer_elapsed(p1_timer) < 5001) {
            if (record->event.pressed) {
                p1_timer = timer_read();
                switch (keycode) {
                    case KC_DOT:
                        keycode = MRO_SPC_PERIOD;
                        break;
                    case KC_SLASH:
                        if (get_mods() & MOD_BIT(KC_LSFT) || get_mods() & MOD_BIT(KC_RSFT)){
                            keycode = MRO_SPC_QUESTION;
                        } 
                        break;
                    case KC_EXLM:
//                        if (get_mods() & MOD_BIT(KC_LSFT) || get_mods() & MOD_BIT(KC_RSFT)){
                            keycode = MRO_SPC_EX;
//                        } 
                        break;
                    case KC_COMMA:
                        keycode = MRO_SPC_COMMA;
                        break;
                    case KC_SCLN:
                        SEND_STRING(SS_TAP(X_SCLN) SS_DELAY(50) SS_TAP(X_SPACE));
                        //SHIFTED = true;
                        return false;
                }
            }
        } else {
            PARAGRAPH_MODE = false;
            SHIFTED = false;
            rgb_matrix_mode_noeeprom(RGB_MATRIX_SOLID_COLOR);
        }
    }

    if (SHIFTED) {
        if (record->event.pressed) {
            SHIFTED = false; 
            if ((keycode >= QK_MOD_TAP && keycode <= QK_MOD_TAP_MAX) ||
             (keycode >= QK_LAYER_TAP && keycode <= QK_LAYER_TAP_MAX)) { keycode = keycode & 0xFF; }
            switch (keycode) {
                case KC_A ... KC_Z:
                    register_code16(KC_LSFT);
                    tap_code16(keycode);
                    unregister_code16(KC_LSFT);
                    return false;
                case MRO_SPC_PERIOD:
                case KC_DOT:
                    SEND_STRING(SS_TAP(X_BSPC) SS_DELAY(10) SS_TAP(X_DOT));
                    return false;
            }
            return true;
        }
    }
    if (!process_case_modes(keycode, record)) {
       return false;
    }

    // Process leader key sequences
    if (!process_leader(keycode, record)) {
        return false;
    }
    if (SPACE_NUMBER_ON) {
        if (record->event.pressed) {
            SPACE_NUMBER_PRESSED = true;
        } 
    } 

  switch (keycode) {   //Start main case
    // case SPACE_NUMBERS:
    //     if (record->event.pressed) {
    //         if (SPACE_NUMBER_ON == false){
    //             //space_timer_doubleshot = timer_read();
    //             space_timer = timer_read();
    //             //layer_on(L_NUMBERS);
    //             SPACE_NUMBER_ON = true;
    //             SPACE_NUMBER_PRESSED = false;
    //         } else {
    //             SECOND_SPACE_NUMBERS_PRESSED = true;
    //             tap_code16(KC_SPACE);
    //         }
        
    //     } else {  // key release
    //         if (SECOND_SPACE_NUMBERS_PRESSED){
    //             SECOND_SPACE_NUMBERS_PRESSED = false;
    //             return false;
    //         }
    //         if (SPACE_NUMBER_PRESSED == false){
    //             if (timer_elapsed(space_timer) < 400) {  //Retro tap time (up to but not after)
    //                 tap_code16(KC_SPACE);
    //             }
    //         }
    //         layer_off(L_NUMBERS);
    //         SPACE_NUMBER_PRESSED = false;
    //         SPACE_NUMBER_ON = false;  
    //         //}
    //     }
    //     return false;
    case LT(L_NUMBERS,KC_SPC):
        if (record->event.pressed) {
            if (SPACE_NUMBER_ON == false){
                //space_timer_doubleshot = timer_read();
                space_timer_retro = timer_read();
                //layer_on(L_NUMBERS);
                SPACE_NUMBER_ON = true;
                SPACE_NUMBER_PRESSED = false;
            }
        } else {  // key release
            if (SPACE_NUMBER_PRESSED == false){
                if ( layer_state_is(L_NUMBERS) && timer_elapsed(space_timer_retro) < 500) {  //Configurable Retro tap time (up to but not after)
                    tap_code16(KC_SPACE);
                }
            }
            SPACE_NUMBER_PRESSED = false;
            SPACE_NUMBER_ON = false;  
            //}
        }
        return true;
#ifdef AUDIO_ENABLE
        case (TO(L_GAMING)):
            if (record->event.pressed) {
                PLAY_SONG(my_gaming_song);
            }
            return true;
#endif
    case LEADER:
        if (record->event.pressed) {
            PLAY_SONG(my_beep3);
            rgb_matrix_mode_noeeprom(RGB_MATRIX_BREATHING);
            rgb_matrix_set_speed_noeeprom(150);
            start_leading();
        }
        return false;

    case BS2:
        if (record->event.pressed) {
          SEND_STRING(SS_TAP(X_BSPC) SS_DELAY(10) SS_TAP(X_BSPC));
        }
        break;
    case BS3:
        if (record->event.pressed) {
          SEND_STRING(SS_TAP(X_BSPC) SS_DELAY(10) SS_TAP(X_BSPC) SS_DELAY(10) SS_TAP(X_BSPC));
        }
        break;
    case BS4:
        if (record->event.pressed) {
          SEND_STRING(SS_TAP(X_BSPC) SS_DELAY(10) SS_TAP(X_BSPC) SS_DELAY(10) SS_TAP(X_BSPC) SS_DELAY(10) SS_TAP(X_BSPC));
        }
        break;
    case BS5:
        if (record->event.pressed) {
          SEND_STRING(SS_TAP(X_BSPC) SS_DELAY(10) SS_TAP(X_BSPC) SS_DELAY(10) SS_TAP(X_BSPC) SS_DELAY(10) SS_TAP(X_BSPC) SS_DELAY(10) SS_TAP(X_BSPC));
        }
        break;
    case BS6:
        if (record->event.pressed) {
          SEND_STRING(SS_TAP(X_BSPC) SS_DELAY(10) SS_TAP(X_BSPC) SS_DELAY(10) SS_TAP(X_BSPC) SS_DELAY(10) SS_TAP(X_BSPC) SS_DELAY(10) SS_TAP(X_BSPC) SS_DELAY(10) SS_TAP(X_BSPC));
        }
        break;
    // case ST_MACRO_0:
    //     if (record->event.pressed) {
    //       SEND_STRING(SS_TAP(X_LSHIFT) SS_DELAY(300) SS_TAP(X_LSHIFT) SS_DELAY(300) SS_TAP(X_1));
    //       workmode = 0;
    //       //rgblight_sethsv_noeeprom(0, 0, 255);
    //       //PLAY_SONG(my_song);

    //     }
    //     break;
    // case ST_MACRO_1:
    //     if (record->event.pressed) {
    //       SEND_STRING(SS_TAP(X_LSHIFT) SS_DELAY(300) SS_TAP(X_LSHIFT) SS_DELAY(300) SS_TAP(X_2));
    //       workmode = 1;
    //       //rgblight_setrgb (RGB_RED);
    //       //PLAY_SONG(my_song);

    //     }
    //     break;
    case LOCKMOUSE:
        layer_lock_on(L_MOUSE);
        break;
    case KVM1:
        if (record->event.pressed) {
          SEND_STRING(SS_DELAY(150) SS_TAP(X_SCRL) SS_DELAY(150) SS_TAP(X_SCRL) SS_DELAY(150) SS_TAP(X_1) SS_DELAY(150));
          workmode = 0;
          //rgblight_sethsv_noeeprom(0, 0, 255);
        }
        break;
    case KVM2:
        if (record->event.pressed) {
          SEND_STRING(SS_DELAY(150) SS_TAP(X_SCRL) SS_DELAY(150) SS_TAP(X_SCRL) SS_DELAY(150) SS_TAP(X_2) SS_DELAY(150));
          workmode = 1;
          //rgblight_setrgb (RGB_RED);
        }
        break;
    case KVM3:
        if (record->event.pressed) {
          SEND_STRING(SS_DELAY(150) SS_TAP(X_SCRL) SS_DELAY(150) SS_TAP(X_SCRL) SS_DELAY(150) SS_TAP(X_3) SS_DELAY(150));
          workmode = 0;
          //rgblight_setrgb (RGB_RED);
        }
        break;
    case KVM4:
        if (record->event.pressed) {
          SEND_STRING(SS_DELAY(150) SS_TAP(X_SCRL) SS_DELAY(150) SS_TAP(X_SCRL) SS_DELAY(150) SS_TAP(X_4) SS_DELAY(150));
          workmode = 0;
          //rgblight_setrgb (RGB_RED);
        }
        break;
    // case ST_MACRO_4:
    //     if (record->event.pressed) {
    //       SEND_STRING(SS_TAP(X_DOT) SS_DELAY(50) SS_TAP(X_SPACE) SS_DELAY(50) SS_TAP(X_SPACE));

    //     }
    //     break;
    case L7_MACRO_1:  // Magnet
        if (record->event.pressed) {
          SEND_STRING(SS_LCTL(SS_LALT(SS_TAP(X_LEFT))));

        }
        break;
    case L7_MACRO_2: // Magnet
        if (record->event.pressed) {
          SEND_STRING(SS_LCTL(SS_LALT(SS_TAP(X_RIGHT))));

        }
        break;
    case L7_MACRO_3:
        if (record->event.pressed) {
          SEND_STRING(SS_LGUI(SS_TAP(X_TAB)));

        }
        break;
    case L7_MACRO_4:
    if (workmode == 1){
      if (record->event.pressed) {
        register_code16(KC_LGUI);
        tap_code16(KC_TAB);
      } else {
        tap_code16(KC_ENTER);
        unregister_code16(KC_LGUI);
      }
    } else {
      if (record->event.pressed) {
        register_code16(KC_LALT);
        tap_code16(KC_TAB);
      } else {
        //tap_code16(KC_SPACE);
        unregister_code16(KC_LALT);
      }
    }
    break;
    case ALTTAB_ON:
    // if (workmode == 1){
    //   if (record->event.pressed) {
    //     register_code16(KC_LGUI);
    //     tap_code16(KC_TAB);
    //     layer_on(L_ALTTAB);
    //   } else {
    //     tap_code16(KC_ENTER);
    //     unregister_code16(KC_LGUI);
    //     layer_off(L_ALTTAB);
    //   }
    // } else {
      if (record->event.pressed) {
        register_code16(KC_LALT);
        tap_code16(KC_TAB);
        layer_on(L_ALTTAB);
      } else {
        //tap_code16(KC_SPACE);
        unregister_code16(KC_LALT);
        layer_off(L_ALTTAB);
      }
    //}
    break;
    case ALTTAB_OFF:
    if (workmode == 1){
      if (record->event.pressed) {
        layer_on(L_ALTTAB);
        tap_code16(KC_ENTER);
        unregister_code16(KC_LGUI);
      }
    } else {
      if (record->event.pressed) {
        layer_on(L_ALTTAB);
      } else {
        //tap_code16(KC_SPACE);
        unregister_code16(KC_LALT);
      }
    }
    break;
    case L7_MACRO_5: // Mission Control
    if (record->event.pressed) {
      SEND_STRING(SS_LCTL(SS_TAP(X_UP)));

    }
    break;
    case L7_MACRO_6: // Magnet
    if (record->event.pressed) {
      SEND_STRING(SS_LCTL(SS_LALT(SS_LGUI(SS_TAP(X_LEFT)))));

    }
    break;
    case L7_MACRO_7: // Magnet
    if (record->event.pressed) {
      SEND_STRING(SS_LCTL(SS_LALT(SS_LGUI(SS_TAP(X_RIGHT)))));

    }
    break;
    case L7_MACRO_8: // Magnet
    if (record->event.pressed) {
      SEND_STRING(SS_LCTL(SS_LALT(SS_LGUI(SS_TAP(X_M)))));

    }
    break;
    case L7_MACRO_9:
    if (workmode == 1){
      if (record->event.pressed) {
        SEND_STRING(SS_LGUI(SS_TAP(X_GRAVE)));
      }
    } else {
      if (record->event.pressed) {
        register_code16(KC_LALT);
        tap_code16(KC_GRAVE);
      } else {
//            tap_code16(KC_ENTER);
      unregister_code16(KC_LALT);
      }
//            SEND_STRING(SS_LALT(SS_TAP(X_GRAVE)));
    }
    break;
    case L7_MACRO_10:
    if (record->event.pressed) {
      if (workmode == 0)
        SEND_STRING(SS_LALT(SS_TAP(X_GRAVE)));
      else
        SEND_STRING(SS_LCTL(SS_TAP(X_UP)));
    }
    break;
    case L7_MACRO_11:
    if (record->event.pressed) {
      SEND_STRING(SS_LALT(SS_TAP(X_ROPT)));

    }
    break;
    case MRO_SPC_PERIOD:
    if (record->event.pressed) {
        SEND_STRING(SS_TAP(X_DOT) SS_DELAY(50) SS_TAP(X_SPACE));
        SHIFTED = true;
    }
    return false;
    case MRO_SPC_COMMA:
    if (record->event.pressed) {
        SEND_STRING(SS_TAP(X_COMMA) SS_DELAY(50) SS_TAP(X_SPACE));
    }
    return false;
    case MRO_SPC_QUESTION:
    if (record->event.pressed) {
        SEND_STRING(SS_LSFT(SS_TAP(X_SLASH)) SS_DELAY(50) SS_TAP(X_SPACE));
        SHIFTED = true;
    }
    return false;
    case MRO_SPC_EX:
    if (record->event.pressed) {
        SEND_STRING(SS_LSFT(SS_TAP(X_1)) SS_DELAY(50) SS_TAP(X_SPACE));
        SHIFTED = true;
    }
    return false;
    case MRO_SPC_MINUS:
    if (record->event.pressed) {
        SEND_STRING(" -");
    }
    break;
    case RGB_SLD:
      if (record->event.pressed) {
        rgblight_mode(1);
      }
      return false;
    case TT(L_MOUSE):
    case TT(L_NUMPADLEFT):
    case TT(L_NUMPADRIGHT):
    case TT(L_NAVIGATION):
      if (record->event.pressed) {
        PLAY_SONG(my_layer_toggle_song);
        break;
      }
    case STATIC:
        if (record->event.pressed) {  //when TOG_STAT is pressed
                static_color_mode = !static_color_mode;  //flip this variable
                set_rgb_layers(L_COLEMAK);
        }
        break;
    case RGB_TOG:
        if (record->event.pressed) {  //when RGB_TOG is pressed
            rgb_matrix_toggle_noeeprom();  //toggle RGB
            if (rgb_matrix_is_enabled()) {
                set_rgb_layers(L_COLEMAK);

            }
        }
        return false;  //do nothing else with this key

    // case MRO_BACKSPACE_WORD:
    // if (record->event.pressed) {
    //   for (i = keycount; i > 0; i--) {
    //     SEND_STRING(SS_TAP(X_BSPC) SS_DELAY(10));
    //   }
    //   keycount = 0;
    // }
    // break;
    //default:
     //  if (record->event.pressed) {
     //    count_chars(keycode, record);
     // }
  }

  return true;
}

// void *leader_signature_func(uint16_t keycode) {
//     switch (keycode) {
//         case KC_Q:
//             PLAY_SONG(my_beep1);
//             SEND_STRING_DELAY("\nRussell\n",20);
//             break;
//         case KC_W:
//             PLAY_SONG(my_beep1);
//             SEND_STRING_DELAY("\nThanks,\nRussell\n",20);
//             break;
//         case KC_F:
//             PLAY_SONG(my_beep1);
//             SEND_STRING_DELAY("\nThank you,\nRussell\n",20);
//             break;
//         case KC_P:
//             PLAY_SONG(my_beep1);
//             SEND_STRING_DELAY("\nThank you for your time,\nRussell\n",20);
//             break;
//         case KC_B:
//             PLAY_SONG(my_beep1);
//             SEND_STRING_DELAY("\nThank you for your time,\nRussell\n",20);
//             break;
//         default:
//             break;
//     }
//     return NULL; // this function is always an endpoint
// }

void *leader_case_func(uint16_t keycode) {
    switch (keycode) {
        case KC_W:
            PLAY_SONG(my_beep1);
            enable_caps_word();
            break;
        case KC_UNDS:
            PLAY_SONG(my_beep1);
            enable_xcase_with(KC_UNDS);
            break;
        case KC_MINS:
            PLAY_SONG(my_beep1);
            enable_xcase_with(KC_MINUS);
            break;
        case KC_A:
            PLAY_SONG(my_beep1);
            enable_xcase_with(KC_UNDS);
            break;
        default:
            break;
    }
    return NULL; // this function is always an endpoint
}

void *leader_start_func(uint16_t keycode) {
    switch (keycode) {
        case KC_Q:
            PLAY_SONG(my_beep2);
            return leader_signature_func;
        case KC_C:
            PLAY_SONG(my_beep2);
            return leader_case_func;
        case KC_P:
            PLAY_SONG(my_beep1);
            PARAGRAPH_MODE = !PARAGRAPH_MODE;
            p1_timer = timer_read();
            return NULL;
//        case KC_T:
//            return leader_toggles_func; // function that toggles keyboard settings
//        case KC_R:
//            reset_keyboard(); // here LDR r will reset the keyboard
//            return NULL; // signal that we're done
        default:
            PLAY_SONG(my_layerbeep);
            return NULL;
    }
}


bool get_ignore_mod_tap_interrupt(uint16_t keycode, keyrecord_t *record) {
    switch (keycode) {
        //case MT(MOD_RSFT,KC_SLASH):
        //    return false;
        // case MT(MOD_LSFT,KC_Z):
        //     return false;
        //case OSM(MOD_LCTL):
        //    return false;
        //case MT(MOD_RSFT,KC_SPC):
        //  return false;
        //case MT(MOD_LSFT,KC_SPC):
        //  return false;
        default:
            return true;
    }
}
bool get_tapping_force_hold(uint16_t keycode, keyrecord_t *record) {
    switch (keycode) {
        // case MT(MOD_LSFT,KC_T):
        //     return false;
        // case MT(MOD_RSFT,KC_N):
        //     return false;
        // case MT(MOD_RSFT,KC_SLASH):
        //     return false;
        // case MT(MOD_LSFT,KC_Z):
        //     return false;

        case MT(MOD_LCTL,KC_A):
        case MT(MOD_LALT,KC_R):
        case MT(MOD_LGUI,KC_S):
        case MT(MOD_LSFT,KC_T):
        case MT(MOD_LGUI,KC_G):
        case MT(MOD_RGUI,KC_M):
        case MT(MOD_RSFT,KC_N):
        case MT(MOD_RGUI,KC_E):
        case MT(MOD_RALT,KC_I):
        case MT(MOD_RCTL,KC_O):
        case MT(MOD_LSFT,KC_Z):
            return true;  // added 2022.09.13
        case LT(L_NUMBERS,KC_SPC):  //XXXX
            return false;
        default:
            return false;
    }
}

bool get_permissive_hold(uint16_t keycode, keyrecord_t *record) {
    switch (keycode) {
    // case LT(L_NUMBERS,KC_SPC):  //Added back 20220819 left in get hold also. // removed again 20220823
    //        return true;
        //case LT(L_NUMPAD,KC_BSPC):
       //     return true;
       //case MT(MOD_RSFT,KC_SPC):
       //     return true;
       //case MT(MOD_LSFT,KC_SPC):
       //     return true;
      default:
          return false;
    }
}

bool get_retro_tapping(uint16_t keycode, keyrecord_t *record) {
     switch (keycode) {
        //case LT(L_NUMBERS,KC_SPC):
        //  return true;
        case LT(L_SOMETHING1,KC_BSPC):
          return true;
        /* Testing removing this:
        case MT(MOD_RSFT,KC_SPC): 
          return true;
        case MT(MOD_LSFT,KC_SPC):
            return true;
        */
        //case LT(L_NUMPAD,KC_BSPC):
        //  return true;
//        case LT(3,KC_A):
//2          return true;
//        case LT(3,KC_O):
//          return true;
        default:
            return false;
     }
 }
 
 bool get_hold_on_other_key_press(uint16_t keycode, keyrecord_t *record) {
     switch (keycode) {
       //case LT(L_NUMBERS,KC_SPC):  //TEST 20220811 numbers slow to hit
       //     return true;           //  Removed again 20220819 numbers slow to trigger // added again...
        // Removed 2022.09.14 since I added MO numbers to right side.
       case LT(L_MACROS1,KC_ESC):
         return true;
       case LT(L_SOMETHING2,KC_TAB):
         return true;
       //case LT(L_SYMBOL,KC_SPC):
       //  return true;
      case LT(L_SOMETHING1,KC_BSPC):
          return true;
       

       //case MT(MOD_RCTL,KC_O):   // 20220823
       //      return true;
       //case MT(MOD_LCTL,KC_A):
       //      return true;
       default:
         // Do not select the hold action when another key is pressed.
         return false;
     }
 }
 
 // home row: MT(MOD_LCTL,KC_A), MT(MOD_LALT,KC_R), MT(MOD_LGUI,KC_S), MT(MOD_LSFT,KC_T), MT(MOD_LGUI,KC_G), XXXXXXX,     XXXXXXX,  MT(MOD_RGUI,KC_M), MT(MOD_RSFT,KC_N), MT(MOD_RGUI,KC_E), MT(MOD_RALT,KC_I), MT(MOD_RCTL,KC_O),
//  MT(MOD_MEH,KC_D),  MT(MOD_HYPR,KC_V),                         MT(MOD_HYPR,KC_K), MT(MOD_MEH,KC_H),  
uint16_t get_tapping_term(uint16_t keycode, keyrecord_t *record) {
     switch (keycode) {
        case TD(DANCE_2):
             return 300;
        //case LT(L_NUMBERS,KC_SPC):
        //     return 175;
        case MT(MOD_LCTL,KC_A):
        case MT(MOD_LALT,KC_R):
        case MT(MOD_LGUI,KC_S):
        case MT(MOD_LSFT,KC_T):
        case MT(MOD_LGUI,KC_G):
        case MT(MOD_RGUI,KC_M):
        case MT(MOD_RSFT,KC_N):
        case MT(MOD_RGUI,KC_E):
        case MT(MOD_RALT,KC_I):
        case MT(MOD_RCTL,KC_O):
        case MT(MOD_LSFT,KC_Z):
            return 200; // added 2022.09.19

        case MT(MOD_MEH,KC_D):
        case MT(MOD_HYPR,KC_V):
        case MT(MOD_HYPR,KC_K):
        case MT(MOD_MEH,KC_H):
            return 250;


        //case MT(MOD_RSFT,KC_SPC):
        //     return 150;
       //case MT(MOD_LSFT,KC_SPC):
       //     return 150;
//        case MT(MOD_RCTL,KC_O):  // 20220823
//            return 150;
//        case MT(MOD_LCTL,KC_A):
//            return 150;
        //case SPACE_NUMBERS:
        //    return 150;

        // case LT(3,KC_O):
        //      return 175;
        // case LT(3,KC_A):
        //      return 175;
        // case LT(9,KC_SPC):
        //      return 150;
        // case LT(10,KC_SPC):
        //      return 150;
       default:
           return TAPPING_TERM;
   }
}

bool achordion_chord(uint16_t tap_hold_keycode,
                     keyrecord_t* tap_hold_record,
                     uint16_t other_keycode,
                     keyrecord_t* other_record) {
  // Exceptionally consider the following chords as holds, even though they
  // are on the same hand in Dvorak.
  switch (tap_hold_keycode) {
    case LT(L_NUMBERS,KC_SPC):  // A + U.
      switch (other_keycode) {
        case KC_A:
        case KC_R:
        case KC_S:
        case KC_T:
        case KC_G:
        case KC_M:
        case KC_N:
        case KC_E:
        case KC_I:
        case KC_O:
            return true;
      }
    break;
  }
  // Also allow same-hand holds when the other key is in the rows below the
  // alphas. I need the `% (MATRIX_ROWS / 2)` because my keyboard is split.
  //if (other_record->event.key.row % (MATRIX_ROWS / 2) >= 4) { return true; }

  // Otherwise, follow the opposite hands rule.
  // return achordion_opposite_hands(tap_hold_record, other_record);
  return false;
}



typedef struct {
    bool is_press_action;
    uint8_t step;
} tap;

enum {
    SINGLE_TAP = 1,
    SINGLE_HOLD,
    DOUBLE_TAP,
    DOUBLE_HOLD,
    DOUBLE_SINGLE_TAP,
    TRIPPLE_TAP,
    TRIPPLE_HOLD,
    TRIPPLE_SINGLE_TAP,
    MORE_TAPS
};

static tap dance_state[11];

uint8_t dance_step(tap_dance_state_t *state);

uint8_t dance_step(tap_dance_state_t *state) {
    if (state->count == 1) {
        if (state->interrupted || !state->pressed) return SINGLE_TAP;
        else return SINGLE_HOLD;
    } else if (state->count == 2) {
        if (state->interrupted) return DOUBLE_SINGLE_TAP;
        else if (state->pressed) return DOUBLE_HOLD;
        else return DOUBLE_TAP;
    } else if (state->count == 3) {
        if (state->interrupted) return TRIPPLE_SINGLE_TAP;
        else if (state->pressed) return TRIPPLE_HOLD;
        else return TRIPPLE_TAP;
    }
    return MORE_TAPS;
}


// void on_dance_0(tap_dance_state_t *state, void *user_data);
// void dance_0_finished(tap_dance_state_t *state, void *user_data);
// void dance_0_reset(tap_dance_state_t *state, void *user_data);

// void on_dance_0(tap_dance_state_t *state, void *user_data) {
//     if(state->count == 3) {
//         tap_code16(KC_ESCAPE);
//         tap_code16(KC_ESCAPE);
//         tap_code16(KC_ESCAPE);
//     }
//     if(state->count > 3) {
//         tap_code16(KC_ESCAPE);
//     }
// }

// void dance_0_finished(tap_dance_state_t *state, void *user_data) {
//     dance_state[0].step = dance_step(state);
//     switch (dance_state[0].step) {
//         case SINGLE_TAP: register_code16(KC_ESCAPE); break;
//         case SINGLE_HOLD: layer_on(9); break;
//         case DOUBLE_TAP: register_code16(KC_GRAVE); break;
//         case DOUBLE_SINGLE_TAP: tap_code16(KC_ESCAPE); register_code16(KC_ESCAPE);
//     }
// }

// void dance_0_reset(tap_dance_state_t *state, void *user_data) {
//     wait_ms(10);
//     switch (dance_state[0].step) {
//         case SINGLE_TAP: unregister_code16(KC_ESCAPE); break;
//         case SINGLE_HOLD: layer_off(9); break;
//         case DOUBLE_TAP: unregister_code16(KC_GRAVE); break;
//         case DOUBLE_SINGLE_TAP: unregister_code16(KC_ESCAPE); break;
//     }
//     dance_state[0].step = 0;
// }
// void on_dance_1(tap_dance_state_t *state, void *user_data);
// void dance_1_finished(tap_dance_state_t *state, void *user_data);
// void dance_1_reset(tap_dance_state_t *state, void *user_data);

// void on_dance_1(tap_dance_state_t *state, void *user_data) {
//     if(state->count == 3) {
//         tap_code16(KC_TAB);
//         tap_code16(KC_TAB);
//         tap_code16(KC_TAB);
//     }
//     if(state->count > 3) {
//         tap_code16(KC_TAB);
//     }
// }

// void dance_1_finished(tap_dance_state_t *state, void *user_data) {
//     dance_state[1].step = dance_step(state);
//     switch (dance_state[1].step) {
//         case SINGLE_TAP: register_code16(KC_TAB); break;
//         case SINGLE_HOLD: layer_on(7); break;
//         case DOUBLE_TAP: register_code16(KC_TAB); register_code16(KC_TAB); break;
//         case DOUBLE_SINGLE_TAP: tap_code16(KC_TAB); register_code16(KC_TAB);
//     }
// }

// void dance_1_reset(tap_dance_state_t *state, void *user_data) {
//     wait_ms(10);
//     switch (dance_state[1].step) {
//         case SINGLE_TAP: unregister_code16(KC_TAB); break;
//         case SINGLE_HOLD: layer_off(7); break;
//         case DOUBLE_TAP: unregister_code16(KC_TAB); break;
//         case DOUBLE_SINGLE_TAP: unregister_code16(KC_TAB); break;
//     }
//     dance_state[1].step = 0;
// }


//void on_dance_2(tap_dance_state_t *state, void *user_data);
void dance_2_finished(tap_dance_state_t *state, void *user_data);
void dance_2_reset(tap_dance_state_t *state, void *user_data);

// void on_dance_2(tap_dance_state_t *state, void *user_data) {
//     if(state->count == 3) {
//         tap_code16(KC_LSFT);
//         tap_code16(KC_LSFT);
//         tap_code16(KC_LSFT);
//     }
//     if(state->count > 3) {
//         tap_code16(KC_LSFT);
//     }
// }

void dance_2_finished(tap_dance_state_t *state, void *user_data) {
    dance_state[2].step = dance_step(state);
    switch (dance_state[2].step) {
        case SINGLE_TAP: SEND_STRING(SS_LGUI(SS_TAP(X_V))); rgb_matrix_sethsv_noeeprom(HSV_WHITE); PLAY_SONG(my_paste);break;
        case SINGLE_HOLD: SEND_STRING(SS_LGUI(SS_TAP(X_C))); rgb_matrix_sethsv_noeeprom(HSV_WHITE);  PLAY_SONG(my_copy); break;
        case DOUBLE_TAP: SEND_STRING(SS_LGUI(SS_TAP(X_C)));  rgb_matrix_sethsv_noeeprom(HSV_WHITE); PLAY_SONG(my_copy); break;
        case DOUBLE_HOLD: SEND_STRING(SS_LGUI(SS_TAP(X_X)));  rgb_matrix_sethsv_noeeprom(HSV_WHITE); PLAY_SONG(my_cut);  break;
        case TRIPPLE_TAP: SEND_STRING(SS_LGUI(SS_TAP(X_X)));  rgb_matrix_sethsv_noeeprom(HSV_WHITE); PLAY_SONG(my_cut);  break;
        //case DOUBLE_SINGLE_TAP: tap_code16(KC_LSFT); register_code16(KC_LSFT);
    }
}

void dance_2_reset(tap_dance_state_t *state, void *user_data) {
    wait_ms(10);
    switch (dance_state[2].step) {
        //case SINGLE_TAP: unregister_code16(KC_LSFT); break;
        case SINGLE_HOLD: SEND_STRING(SS_LGUI(SS_TAP(X_V))); break;
        //case DOUBLE_TAP: unregister_code16(KC_LSFT); break;
        case DOUBLE_HOLD: SEND_STRING(SS_LGUI(SS_TAP(X_V))); break;
        //case DOUBLE_SINGLE_TAP: unregister_code16(KC_LSFT); break;
    }
    dance_state[2].step = 0;
}
// void dance_3_finished(tap_dance_state_t *state, void *user_data);
// void dance_3_reset(tap_dance_state_t *state, void *user_data);

// void dance_3_finished(tap_dance_state_t *state, void *user_data) {
//     dance_state[3].step = dance_step(state);
//     switch (dance_state[3].step) {
//         case SINGLE_TAP: layer_move(3); break;
//         case SINGLE_HOLD: layer_on(4); break;
//         case DOUBLE_TAP: layer_move(1); break;
//         case DOUBLE_HOLD: layer_on(7); break;
//         case DOUBLE_SINGLE_TAP: layer_move(3); break;
//     }
// }

// void dance_3_reset(tap_dance_state_t *state, void *user_data) {
//     wait_ms(10);
//     switch (dance_state[3].step) {
//         case SINGLE_HOLD: layer_off(4); break;
//         case DOUBLE_HOLD: layer_off(7); break;
//     }
//     dance_state[3].step = 0;
// }
void on_dance_4(tap_dance_state_t *state, void *user_data);
void dance_4_finished(tap_dance_state_t *state, void *user_data);
void dance_4_reset(tap_dance_state_t *state, void *user_data);

void on_dance_4(tap_dance_state_t *state, void *user_data) {
    if(state->count == 3) {
        tap_code16(KC_MINUS);
        tap_code16(KC_MINUS);
        tap_code16(KC_MINUS);
    }
    if(state->count > 3) {
        tap_code16(KC_MINUS);
    }
}

void dance_4_finished(tap_dance_state_t *state, void *user_data) {
    dance_state[4].step = dance_step(state);
    switch (dance_state[4].step) {
        case SINGLE_TAP: register_code16(KC_MINUS); break;
        case DOUBLE_TAP: register_code16(KC_PERC); break;
        case DOUBLE_SINGLE_TAP: tap_code16(KC_MINUS); register_code16(KC_MINUS);
    }
}

void dance_4_reset(tap_dance_state_t *state, void *user_data) {
    wait_ms(10);
    switch (dance_state[4].step) {
        case SINGLE_TAP: unregister_code16(KC_MINUS); break;
        case DOUBLE_TAP: unregister_code16(KC_PERC); break;
        case DOUBLE_SINGLE_TAP: unregister_code16(KC_MINUS); break;
    }
    dance_state[4].step = 0;
}
void on_dance_5(tap_dance_state_t *state, void *user_data);
void dance_5_finished(tap_dance_state_t *state, void *user_data);
void dance_5_reset(tap_dance_state_t *state, void *user_data);

void on_dance_5(tap_dance_state_t *state, void *user_data) {
    if(state->count == 3) {
        tap_code16(KC_PLUS);
        tap_code16(KC_PLUS);
        tap_code16(KC_PLUS);
    }
    if(state->count > 3) {
        tap_code16(KC_PLUS);
    }
}

void dance_5_finished(tap_dance_state_t *state, void *user_data) {
    dance_state[5].step = dance_step(state);
    switch (dance_state[5].step) {
        case SINGLE_TAP: register_code16(KC_PLUS); break;
        case DOUBLE_TAP: register_code16(KC_CIRC); break;
        case DOUBLE_SINGLE_TAP: tap_code16(KC_PLUS); register_code16(KC_PLUS);
        //default: register_code16(KC_ASTERISK); break;
    }
}

void dance_5_reset(tap_dance_state_t *state, void *user_data) {
    //wait_ms(10);
    switch (dance_state[5].step) {
        case SINGLE_TAP: unregister_code16(KC_PLUS); break;
        case DOUBLE_TAP: unregister_code16(KC_CIRC); break;
        case DOUBLE_SINGLE_TAP: unregister_code16(KC_PLUS); break;
        //default: unregister_code16(KC_ASTERISK); unregister_code16(KC_SLASH); break;
    }
    dance_state[5].step = 0;
}
void on_dance_6(tap_dance_state_t *state, void *user_data);
void dance_6_finished(tap_dance_state_t *state, void *user_data);
void dance_6_reset(tap_dance_state_t *state, void *user_data);

void on_dance_6(tap_dance_state_t *state, void *user_data) {
    if(state->count == 3) {
        tap_code16(KC_DOT);
        tap_code16(KC_DOT);
        tap_code16(KC_DOT);
    }
    if(state->count > 3) {
        tap_code16(KC_DOT);
    }
}

void dance_6_finished(tap_dance_state_t *state, void *user_data) {
    dance_state[6].step = dance_step(state);
    switch (dance_state[6].step) {
        case SINGLE_TAP: register_code16(KC_DOT); break;
        case DOUBLE_TAP: register_code16(KC_DLR); break;
        case DOUBLE_SINGLE_TAP: tap_code16(KC_DOT); register_code16(KC_DOT);
    }
}

void dance_6_reset(tap_dance_state_t *state, void *user_data) {
    //wait_ms(10);
    switch (dance_state[6].step) {
        case SINGLE_TAP: unregister_code16(KC_DOT); break;
        case DOUBLE_TAP: unregister_code16(KC_DLR); break;
        case DOUBLE_SINGLE_TAP: unregister_code16(KC_DOT); break;
    }
    dance_state[6].step = 0;
}
// void on_dance_7(tap_dance_state_t *state, void *user_data);
void dance_7_finished(tap_dance_state_t *state, void *user_data);
//void dance_7_reset(tap_dance_state_t *state, void *user_data);

// void on_dance_7(tap_dance_state_t *state, void *user_data) {
//     if(state->count == 3) {
//         tap_code16(KC_SPC);
//         tap_code16(KC_SPC);
//         tap_code16(KC_SPC);
//     }
//     if(state->count > 3) {
//         tap_code16(KC_SPC);
//     }
// }

void dance_7_finished(tap_dance_state_t *state, void *user_data) {
     dance_state[7].step = dance_step(state);
     switch (dance_state[7].step) {
         case SINGLE_TAP: layer_move(L_GAMING); break;
         case DOUBLE_TAP: layer_move(L_GAMINGQWERTY); break;
     }
 }

// void dance_7_reset(tap_dance_state_t *state, void *user_data) {
//     wait_ms(10);
//     switch (dance_state[7].step) {
//         case SINGLE_TAP: unregister_code16(KC_SPC); break;
//         case SINGLE_HOLD: layer_off(9); unregister_code16(KC_SPC); break;
//         case DOUBLE_TAP: unregister_code16(KC_SPC); break;
//         case DOUBLE_SINGLE_TAP: unregister_code16(KC_SPC); break;
//     }
//     dance_state[7].step = 0;
// }
// void on_dance_8(tap_dance_state_t *state, void *user_data);
// void dance_8_finished(tap_dance_state_t *state, void *user_data);
// void dance_8_reset(tap_dance_state_t *state, void *user_data);

// void on_dance_8(tap_dance_state_t *state, void *user_data) {
//     if(state->count == 3) {
//         tap_code16(KC_ENTER);
//         tap_code16(KC_ENTER);
//         tap_code16(KC_ENTER);
//     }
//     if(state->count > 3) {
//         tap_code16(KC_ENTER);
//     }
// }

// void dance_8_finished(tap_dance_state_t *state, void *user_data) {
//     dance_state[8].step = dance_step(state);
//     switch (dance_state[8].step) {
//         case SINGLE_TAP: register_code16(KC_ENTER); break;
//         case SINGLE_HOLD: layer_on(10); break;
//         case DOUBLE_TAP: tap_code16(KC_ENTER); register_code16(KC_ENTER); break;
//         case DOUBLE_SINGLE_TAP: tap_code16(KC_ENTER); register_code16(KC_ENTER);
//     }
// }

// void dance_8_reset(tap_dance_state_t *state, void *user_data) {
//     wait_ms(10);
//     switch (dance_state[8].step) {
//       case SINGLE_TAP: unregister_code16(KC_ENTER); break;
//       case SINGLE_HOLD: layer_off(10); unregister_code16(KC_ENTER); break;
//       case DOUBLE_TAP: unregister_code16(KC_ENTER); break;
//       case DOUBLE_SINGLE_TAP: unregister_code16(KC_ENTER); break;
//     }
//     dance_state[8].step = 0;
// }
// void on_dance_9(tap_dance_state_t *state, void *user_data);
// void dance_9_finished(tap_dance_state_t *state, void *user_data);
// void dance_9_reset(tap_dance_state_t *state, void *user_data);

// void on_dance_9(tap_dance_state_t *state, void *user_data) {
//     if(state->count == 3) {
//         tap_code16(KC_DOT);
//         tap_code16(KC_DOT);
//         tap_code16(KC_DOT);
//     }
//     if(state->count > 3) {
//         tap_code16(KC_DOT);
//     }
// }

// void dance_9_finished(tap_dance_state_t *state, void *user_data) {
//     dance_state[9].step = dance_step(state);
//     switch (dance_state[9].step) {
//         case SINGLE_TAP: register_code16(KC_DOT); break;
//         case DOUBLE_TAP: register_code16(KC_EQUAL); break;
//         case DOUBLE_SINGLE_TAP: tap_code16(KC_DOT); register_code16(KC_DOT);
//     }
// }

// void dance_9_reset(tap_dance_state_t *state, void *user_data) {
//     wait_ms(10);
//     switch (dance_state[9].step) {
//         case SINGLE_TAP: unregister_code16(KC_DOT); break;
//         case DOUBLE_TAP: unregister_code16(KC_EQUAL); break;
//         case DOUBLE_SINGLE_TAP: unregister_code16(KC_DOT); break;
//     }
//     dance_state[9].step = 0;
// }
// void on_dance_10(tap_dance_state_t *state, void *user_data);
// void dance_10_finished(tap_dance_state_t *state, void *user_data);
// void dance_10_reset(tap_dance_state_t *state, void *user_data);

// void on_dance_10(tap_dance_state_t *state, void *user_data) {
//     if(state->count == 3) {
//         tap_code16(KC_PERCENT);
//         tap_code16(KC_PERCENT);
//         tap_code16(KC_PERCENT);
//     }
//     if(state->count > 3) {
//         tap_code16(KC_PERCENT);
//     }
// }

// void dance_10_finished(tap_dance_state_t *state, void *user_data) {
//     dance_state[10].step = dance_step(state);
//     switch (dance_state[10].step) {
//         case SINGLE_TAP: register_code16(KC_PERCENT); break;
//         case DOUBLE_TAP: register_code16(KC_DOLLAR); break;
//         case DOUBLE_SINGLE_TAP: tap_code16(KC_PERCENT); register_code16(KC_PERCENT);
//     }
// }

// void dance_10_reset(tap_dance_state_t *state, void *user_data) {
//     wait_ms(10);
//     switch (dance_state[10].step) {
//         case SINGLE_TAP: unregister_code16(KC_PERCENT); break;
//         case DOUBLE_TAP: unregister_code16(KC_DOLLAR); break;
//         case DOUBLE_SINGLE_TAP: unregister_code16(KC_PERCENT); break;
//     }
//     dance_state[10].step = 0;
// }

qk_tap_dance_action_t tap_dance_actions[] = {
        //[DANCE_0] = ACTION_TAP_DANCE_FN_ADVANCED(on_dance_0, dance_0_finished, dance_0_reset),
        //[DANCE_1] = ACTION_TAP_DANCE_FN_ADVANCED(on_dance_1, dance_1_finished, dance_1_reset),
        [DANCE_2] = ACTION_TAP_DANCE_FN_ADVANCED(NULL, dance_2_finished, dance_2_reset),
        //[DANCE_3] = ACTION_TAP_DANCE_FN_ADVANCED(NULL, dance_3_finished, dance_3_reset),
        [DANCE_4] = ACTION_TAP_DANCE_FN_ADVANCED(on_dance_4, dance_4_finished, dance_4_reset),
        [DANCE_5] = ACTION_TAP_DANCE_FN_ADVANCED(on_dance_5, dance_5_finished, dance_5_reset),
        [DANCE_6] = ACTION_TAP_DANCE_FN_ADVANCED(on_dance_6, dance_6_finished, dance_6_reset),
        //[DANCE_7] = ACTION_TAP_DANCE_FN_ADVANCED(on_dance_7, dance_7_finished, dance_7_reset),
        [DANCE_7] = ACTION_TAP_DANCE_FN_ADVANCED(NULL, dance_7_finished, NULL),
        //[DANCE_8] = ACTION_TAP_DANCE_FN_ADVANCED(on_dance_8, dance_8_finished, dance_8_reset),
        //[DANCE_9] = ACTION_TAP_DANCE_FN_ADVANCED(on_dance_9, dance_9_finished, dance_9_reset),
        //[DANCE_10] = ACTION_TAP_DANCE_FN_ADVANCED(on_dance_10, dance_10_finished, dance_10_reset),
};

#include  "../src/include/qmk-include.c"

